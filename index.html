<!DOCTYPE html>
<html lang="en" style="height:100%" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>一张网地图展示</title>
    <link rel="stylesheet" href="assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="assets/css/animate.css" type="text/css">
    <link rel="stylesheet" href="assets/css/bootstrap-slider.css" type="text/css">

    <link rel="stylesheet" href="http://60.29.110.104/arcgis_js_api/library/3.15/3.15compact/esri/css/esri.css">
    <link rel="stylesheet" href="http://60.29.110.104/arcgis_js_api/library/3.15/3.15compact/dijit/themes/claro/claro.css">

    <link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.css" type="text/css">
    <link rel="stylesheet" href="scripts/modules/infoWindow/InfoWindow.css" type="text/css">

    <link rel="stylesheet" href="assets/css/style.css" type="text/css">
    <style type="text/css">
        #mapDiv {
            min-height: 100px;
            max-height: 2000px;
        }
    </style>
</head>
<body  class="claro" style="height:100%;">
<div id="pageloader" class="dark-div"
     style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 99999; display1: none; background: rgba(23, 155, 215 , .8);">
    <div class="spinner">
        <div class="cube1"></div>
        <div class="cube2"></div>
    </div>
    <div style="text-align:center;margin-top:10%;font-size:50px;color:#fff">空港 一张网地图展示</div>
</div>


<div id="outerwrap" style="height:100%" v-cloak>
    <div id="mainwrap" style="height:100%" v-bind:class="{ 'sideexpanded': sideExpanded}">
        <div id="mapPanel" style="position: relative;height:100%">
            <div id="heatLayer"></div>
            <div id="mapDiv" style="height:100%;width:100%"></div>
            <!--bottom menu start-->
            <div class="bmenu text-center" id="bottomBar">
                <ul class="nav navbar-nav">
                    <li v-for="menu in menus">
                        <a href="#" data-modaltarget1="{{menu.modal}}" @click="openModal(menu)">
                            <i class="fa {{menu.icon}}"></i>
                            <p>{{menu.text}}</p>
                        </a>
                    </li>
                </ul>
                <div class="navbar-right" style="margin-right:0;line-height:65px;padding-right:15px;">
                    <a href="#"><i class="fa fa-home" style="font-size:24px"></i></a>
                    <i class="fa fa-home" style="font-size:24px"></i>
                </div>
            </div>
            <!--bottom menu end-->

            <!--图例-->
            <div id="toptools">
                <div class="tool dropdown" id="maptype">
                    <a data-toggle="dropdown" style="background:#fff">
                        <i class="fa fa-map-marker"></i>
                        地图类别
                        <i class="fa fa-caret-down"></i>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right">
                        <div id="basemapGallery"></div>
                    </div>

                </div>
                <div class="tool">
                    <a href="#" @click="toggleSide"><i class="fa fa-indent"></i></a>
                </div>
            </div>
            <!--
            <div id="BasemapToggle"></div>
            -->
            <div id="XYinfo" style="background-color: transparent; font-weight: normal; font-size: smaller;color:#3C7AFF; position: absolute; padding: 2px; left: 10px; bottom: 65px; z-index: 99;"></div>

        </div>
        <div id="sidepanel">
            <div class="sidepanel-item search"
                 transition="sidepanelitem"
                 v-show="showList">
                <div class='sideheader'>
                    <div class="input-group">
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default dropdown-toggle"
                                    data-toggle="dropdown" aria-haspopup="true"
                                    style="margin-right:-2px"
                                    aria-expanded="false">
                                {{currentQueryType.text}}
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" >
                                <li v-for="type in queryTypes" @click="currentQueryType = type">
                                    <a >{{type.text}}</a>
                                </li>
                            </ul>
                        </div>
                        <input type="text" class="form-control" id="searchText" v-model="keyword" placeholder="请输入查询内容，默认为该类别所有内容">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" id="findBtn" @click="search">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                    </div>
                    <div style="padding-top:10px">
                        <div v-show="sideLoading">查询数据中...</div>
                        <div v-show="!sideLoading && result.length>0">
                            &nbsp;
                            <span class="pull-right">{{result.length}}条结果</span>
                        </div>
                    </div>
                </div>
                <div class="sidecontent mCustomScrollbar"
                     data-mcs-theme="minimal-dark">
                    <div class="list-group" style="margin:0">
                        <a class='list-group-item'
                           v-for="item in result"
                           v-bind:class="{ 'active': item == currentSelectedCompany}"
                           @click="showResultItem(item)">
                            <sapn><img v-bind:src="../onemappage/assets/images/location_icon/{{$index}}.PNG" alt="img"></sapn>{{item.value}}
                        </a>
                    </div>
                </div>
            </div>

            <div class="sidepanel-item detail"
                 transition="sidepanelitem"
                 v-show="showDetail">
                <div class='sideheader'>
                    <div class="row">
                        <div @click="backToList()" class="col-md-1" style="padding-right:0;width:42px !important;">
                            <a class="btn-back" >
                                <i class="fa fa-arrow-left"></i>
                            </a>
                        </div>
                        <div class="col-md-10"
                             style="font-weight:bold;padding-left:10px;line-height:36px;font-size:18px;overflow:hidden;text-overflow: ellipsis;white-space: nowrap;">
                            {{currentSelectedCompany.value}}
                        </div>
                    </div>

                </div>
                <div class="sidecontent mCustomScrollbar"
                     data-mcs-theme="minimal-dark">
                    <div v-show="currentDetailMenu.code == 'info'"
                         transition="detail">
assdfa
                    </div>
                    <div v-show="currentDetailMenu.code == 'danger'"
                         transition="detail">
                        <table class="table table-hover table-condensed">
                            <tr>
                                <th style="width:20px"></th>
                                <th v-for="filed in companyDangerData.columns | filterBy myCustomFilterFunction">{{filed.text}}</th>
                            </tr>
                            <template v-for="r in companyDangerData.store">
                                <tr v-bind:class="{'info' : companyDangerSelectedItem == r}"
                                    @click="companyDangerSelectedItem = (companyDangerSelectedItem == r ? null : r)"
                                >
                                    <td>{{$index+1}}</td>
                                    <td v-for="f in companyDangerData.columns | filterBy myCustomFilterFunction">
                                        {{r[f.code]}}
                                    </td>
                                </tr>
                                <tr v-show="companyDangerSelectedItem == r">
                                    <td colspan="{{companyDangerData.firstShowFields.length+1}}" style="padding:0">
                                        <table class="table" style="margin:0;background-color:#f7f7f7">
                                            <tr v-for="c in companyDangerData.columns">
                                                <td style="border1:0;width:120px;text-align:right">{{c.text}}:</td>
                                                <td style="border1:0">{{r[c.code]}}</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </template>
                        </table>
                    </div>
                    <div v-show="currentDetailMenu.code == 'discharge'"
                         transition="detail">
                        <table class="table">
                            <template v-for="item in companyDischargeData">
                                <tr>
                                    <td>{{item.name}}</td>
                                </tr>
                                <tr v-for="child in item.children">
                                    <td>{{$}}</td><td>{{child.name}}</td>
                                </tr>
                            </template>

                        </table>
                    </div>
                </div>
                <div class="sidefooter">
                    <div class="row text-center" style="padding:10px 10px 0 10px;">
                        <div class="col-md-4" v-for="item in detailMenus">
                            <a @click='switchDetail(item)'
                               :class="{'active' : currentDetailMenu == item , 'disabled' : item.disabled}">
                                <i class="fa {{item.icon || 'fa-arrow-left'}}" style="font-size:22px"></i>
                                <div>{{item.text}}</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<div class="dijitHidden" v-cloak>
    <!-- dialog that gets its content via ajax, uses loading message -->
    <div data-dojo-type="dijit/Dialog"
         style="width:300px;height:300px;background:#Fff"
		 data-modalhref="scripts/views/modal1.html"
         data-dojo-props="title:'事件地点定位',href1:'scripts/views/modal1.html',loadingMessage:'Loading dialog content...'"
         id="modal1"></div>

    <div data-dojo-type="dijit/Dialog"
         style="width:400px;height:300px;background:#Fff"		 
		 data-modalhref="scripts/views/modal2.html"
         data-dojo-props="title:'范围确定',href1:'scripts/views/modal2.html',loadingMessage:'Loading dialog content...'"
         id="modal2"></div>

    <div data-dojo-type="dijit/Dialog"
         style="width:400px;height:400px;background:#Fff"
		 data-modalhref="scripts/views/modal3.html"
         data-dojo-props="title:'公共影响因素分析',href1:'scripts/views/modal3.html',loadingMessage:'Loading dialog content...'"
         id="modal3"></div>

    <div data-dojo-type="dijit/Dialog"
         style="width:400px;height:400px;background:#Fff"
         data-modalhref="scripts/views/modal4.html"
         data-dojo-props="title:'社会资源分析',href1:'scripts/views/modal4.html',loadingMessage:'Loading dialog content...'"
         id="modal4"></div>

    <div data-dojo-type="dijit/Dialog"
         style="width:400px;height:400px;background:#Fff"
         data-modalhref="scripts/views/modal5.html"
         data-dojo-props="title:'救援路径分析',href1:'scripts/views/modal5.html',loadingMessage:'Loading dialog content...'"
         id="modal5"></div>

    <div data-dojo-type="dijit/Dialog"
		 data-modalhref="scripts/views/modal6.html"
         style="width:400px;height:400px;background:#Fff"
         data-dojo-props="title:'态势标绘',href1:'scripts/views/modal6.html',loadingMessage:'Loading dialog content...'"
         id="modal6"></div>
</div>
<script>
    var dojoConfig={
        parseOnLoad:true ,
        //配置多个自定义modules的方法
        packages: [{
            "name":"myModules" ,
            "location":location.pathname.replace(/\/[^/]+$/ , "")+"/scripts/modules"
        }, {
            "name": 'bism',
            "location":location.pathname.replace(/\/[^/]+$/ , "")+"/scripts/modules"
        },{
            "name":'myAppMeasure',
            "location":location.pathname.replace(/\/[^/]+$/, "") + "/scripts/modules/myAppMeasure"
        }]
    };
</script>
<script type="text/javascript" src="assets/scripts/lodash.js"></script>
<script type="text/javascript" src="assets/scripts/jscolor.js"></script>
<script type="text/javascript" src="assets/scripts/vue.js"></script>
<script type="text/javascript" src="assets/scripts/jquery.min.js"></script>
<script type="text/javascript" src="assets/scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/scripts/owl.carousel.min.js"></script>
<script type="text/javascript" src="assets/scripts/jquery.mCustomScrollbar.concat.min.js"></script>
<script type="text/javascript" src="assets/scripts/bootstrap-dialog.js"></script>
<script type="text/javascript" src="assets/scripts/bootstrap-slider.js"></script>


<script type="text/javascript" src="scripts/golbal.js"></script>
<!--正式发布用compact版-->
<script type="text/javascript" src="http://60.29.110.104/arcgis_js_api/library/3.15/3.15compact/init.js"></script>
<!--<script type="text/javascript" src="http://60.29.110.104/arcgis_js_api/library/3.15/3.15/init.js"></script>-->
<script type="text/javascript" src="scripts/modules/heatmap.js"></script>

<script type="text/javascript" src="../../js/tjx.js"></script>
<script type="text/javascript" src="../../js/tjx.util.js"></script>
<script type="text/javascript" src="../../js/tjx.util.io.js"></script>
<script type="text/javascript" src="../../js/tjx.data.safetysearch.js"></script>



<script type="text/javascript" src="scripts/vue/main.js"></script>
<!--
<script type="text/javascript" src="scripts/vue/side.js"></script>
<script type="text/javascript" src="scripts/vue/bottomBar.js"></script>
-->


<script type="text/javascript" src="scripts/vue/modal1.js"></script>
<script type="text/javascript" src="scripts/vue/modal2.js"></script>
<script type="text/javascript" src="scripts/vue/modal3.js"></script>
<script type="text/javascript" src="scripts/vue/modal4.js"></script>
<script type="text/javascript" src="scripts/vue/modal5.js"></script>
<script type="text/javascript" src="scripts/vue/modal6.js"></script>

<script src="scripts/init.js"></script>

<script type="text/javascript" src="scripts/requireDojo.js"></script>
<script type="text/javascript" src="assets/scripts/InfoTip.js"></script>

</body>
</html>